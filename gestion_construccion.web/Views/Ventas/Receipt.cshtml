@model Firmeza.Core.Models.Venta

@{
    ViewData["Title"] = "Recibo de Venta";
}

<div class="card-admin card-admin-enhanced">
    <div class="card-header card-header-enhanced">
        <div class="header-left">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-header">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
            <div>
                <h2 class="title">Recibo de Venta #@Model.Id</h2>
                <p class="subtitle">Detalles completos de la transacción</p>
            </div>
        </div>
        <div class="header-right">
            <span class="badge-id">ID: @Model.Id</span>
        </div>
    </div>

    <div class="form-content">
        <h4 style="color: var(--color-primary); margin-bottom: 20px;">Información de la Venta</h4>
        
        <dl class="row-details">
            <dt>Cliente:</dt>
            <dd>@Model.Cliente?.Usuario?.Nombre</dd>

            <dt>Fecha:</dt>
            <dd>@Model.Fecha.ToString("dd/MM/yyyy HH:mm")</dd>

            <dt>Total:</dt>
            <dd><strong style="color: var(--color-price); font-size: 1.2rem;">@Model.Total.ToString("C")</strong></dd>
        </dl>

        <h4 style="color: var(--color-primary); margin-top: 30px; margin-bottom: 20px;">Detalles de Productos</h4>
        
        <table class="table-admin">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th style="text-align: center;">Cantidad</th>
                    <th style="text-align: right;">Precio Unitario</th>
                    <th style="text-align: right;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var detalle in Model.Detalles)
                {
                    <tr>
                        <td><strong style="color: var(--color-text-main);">@detalle.Producto?.Nombre</strong></td>
                        <td style="text-align: center;">
                            <span class="badge badge-info">@detalle.Cantidad</span>
                        </td>
                        <td style="text-align: right; color: var(--color-text-secondary);">@detalle.PrecioUnitario.ToString("C")</td>
                        <td style="text-align: right;">
                            <strong style="color: var(--color-price);">@((detalle.Cantidad * detalle.PrecioUnitario).ToString("C"))</strong>
                        </td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr style="border-top: 2px solid var(--color-primary);">
                    <td colspan="3" style="text-align: right; padding: 16px; font-weight: 700; color: var(--color-text-main);">Total:</td>
                    <td style="text-align: right; padding: 16px;">
                        <strong style="color: var(--color-price); font-size: 1.3rem;">@Model.Total.ToString("C")</strong>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="form-actions">
        <a asp-action="Index" class="btn-admin-secondary btn-cancel">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 12H5"></path>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Volver al Historial
        </a>
    </div>
</div>
